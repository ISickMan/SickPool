// #include <simdjson.h>

// #include <vector>

// #include "daemon_manager.hpp"
// #include "daemon_rpc.hpp"
// #include "gtest/gtest.h"
// #include "job_manager.hpp"

// TEST(JobManager, ParseGenesisTemplate)
// {
//     using namespace std::string_view_literals;
//     JobManagerSin job_manager(nullptr, nullptr, "SickpooLoMub57urgdmbhRMeM4ia3ysiid");

//     std::string template_json =
//         "{\"capabilities\":[\"proposal\"],\"version\":536870912,\"rules\":["
//         "\"csv\"],\"vbavailable\":{},\"vbrequired\":0,\"previousblockhash\":"
//         "\"a4f8aa2190b24ad832bb98779702efe81fcd18be5e1edb6279882218446f030a\","
//         "\"transactions\":[{\"data\":"
//         "\"0200000001a1d4e8971993d84e28bebc05469513ac5dc2eccaccc0b948f8189d2f90"
//         "4ecacb000000006a47304402201a96c7ed0362ab9a20618abae77d99ab9557798a793d"
//         "ef606aeb1c6d48f9eaaf02207096d01420dd18238933a32a7d4b232e597242d7340d7d"
//         "51dbd7df5e52626a160121021c5c4021cd11250aaa74937a4f5ac53692e7a40e51ca4a"
//         "3d8c7cf5eb6d6fe584feffffff02248f2f6d000000001976a9143fcc96d24ff0d2d2d1"
//         "40d6353e112c57650a42e288ac404b4c00000000008b14ebaf5ec74cb2e2342e06bd79"
//         "c0daeb0c17c9818b6a4c73313133333438343b353b34364c43357944384556374a7633"
//         "3868455471747a53566e6e595941754d43456657743942483564555a4b6b3166617042"
//         "5a7a4c455a365666683472647135364b72325757577265665a44445558336e5078694e"
//         "754743573b3331303b3330333b3334343b3238343b7e4b1100\",\"txid\":"
//         "\"4d0499fe9e12b67fb93e071af52a5d9fdec3fca1699a0555997cab381273cc49\","
//         "\"hash\":"
//         "\"4d0499fe9e12b67fb93e071af52a5d9fdec3fca1699a0555997cab381273cc49\","
//         "\"depends\":[],\"fee\":850066,\"sigops\":1,\"weight\":1356},{\"data\":"
//         "\"020000000172df35e1abc570a2b9bbfc574e3c814f4e1354cf247be78bd5b24e05e5"
//         "4aee7d000000006a473044022069f3e7fe3df2c4e1034d43a82c330d164b86d4160725"
//         "11f271180df6b76556140220484ee0f2001259eb2d1f0ab7e7d37ac7e32c12002fa248"
//         "6b0c861be348ca751c01210332a40023807b251d9a3e1a23e178ceb088bd2f01e87599"
//         "bd9c74634228de9af9feffffff02c1218fce000000001976a914e8f211c5ef02211984"
//         "04969664a53e08bde5810488ac404b4c00000000008b14ebaf5ec74cb2e2342e06bd79"
//         "c0daeb0c17c9818b6a4c73313133333438343b313b344c707a436832475843737a5079"
//         "366938644a357647447a425261764e4d523171584d4d5651587a783557714d44514e76"
//         "6243354a363978464a35675173665961726141794d486e426673506942565a79684262"
//         "5a416a733b3133353b3135303b3232323b3333333b7c4b1100\",\"txid\":"
//         "\"426f85b65d138778585ac91951293024def02e5fc6e1b005ec6379c4723d9c61\","
//         "\"hash\":"
//         "\"426f85b65d138778585ac91951293024def02e5fc6e1b005ec6379c4723d9c61\","
//         "\"depends\":[],\"fee\":850066,\"sigops\":1,\"weight\":1356},{\"data\":"
//         "\"0200000002b3ea473b726e5532fd16465d976f948edb9643661d50743090630cffb9"
//         "4131b5010000006a47304402205d9b8df312f2919e216a3e4b263a144da884d40c627d"
//         "1825902f9d3bb3ccd1fa022015d2abc814c2a9953a6dbf4821ef487669100c8170d1d5"
//         "a83dec341af507425501210223f18836c777b9dcedc194ebd0a69aeb5b7bce46dde9cc"
//         "c80cd622593d7bbed6feffffff0f78777cf6ec1a53c819fa63368726a96c874696f567"
//         "55a7ddc0e82891d4011f080000006a47304402204c898212b5e91c3f033ce5657fb776"
//         "aebe629f5141a45327d56e811980dc2246022050963ad9462c4986154e6f72dd596a6f"
//         "bf5560654b081beecf90d00b82f81fd201210223f18836c777b9dcedc194ebd0a69aeb"
//         "5b7bce46dde9ccc80cd622593d7bbed6feffffff020e892214010000001976a914c3bc"
//         "e984b4e06a18ec5a0c89588db0fd43d4b95988ac404b4c00000000008b14ebaf5ec74c"
//         "b2e2342e06bd79c0daeb0c17c9818b6a4c73313133333438363b313b32386e6952464d"
//         "426f66456d626979483673664431674b59587577743932744a6966644a5a7279454a6d"
//         "4e7076784268484d4b5532684778346759563172776b7a647061707972576433385738"
//         "745166697965314e616e393b3134333b3330333b3334353b3335393b7d4b1100\","
//         "\"txid\":"
//         "\"984285d442a0507873ea0439b9d742a10cb68ab21a893c63cc39c3203bbf531e\","
//         "\"hash\":"
//         "\"984285d442a0507873ea0439b9d742a10cb68ab21a893c63cc39c3203bbf531e\","
//         "\"depends\":[],\"fee\":1218678,\"sigops\":1,\"weight\":1944},{"
//         "\"data\":"
//         "\"020000000274cbc5dddb3f47fcd172f7a63101215fa2b9348840e49e9ffa52c3b3e3"
//         "e12a05070000006a473044022038c7042f31bad9f1dbfae8eb65a64e73acc0cd58ed7f"
//         "772cba702dd30923831b02203d9bcb222e9f3b70f9e3c4c0454691a8cd2c263838cecc"
//         "e86b473fafd4625a4001210254b62673db3d24c7c0e45d938eeeb511ced0f704f79436"
//         "98a7e73c4239e4fc8bfeffffffa32551ecd3e4fb7a103baac998415e599b266edbf0fd"
//         "b349a077b45aa13f0453010000006a47304402205bafcc8c61b20fc05a3c84e6c71531"
//         "ad44a3b34aaf12cb0334d66311f6983720022063e4c8c123dda5e993cd67a314471ffe"
//         "e76a8fb48477353def3bc42595cda71801210254b62673db3d24c7c0e45d938eeeb511"
//         "ced0f704f7943698a7e73c4239e4fc8bfeffffff0203c9e2f7000000001976a91428f9"
//         "4cfb0ede12675a3768742f524234d0c0def988ac404b4c00000000008a14ebaf5ec74c"
//         "b2e2342e06bd79c0daeb0c17c9818b6a4c72313133333438373b313b35456556454677"
//         "584a67425237713242645279336d37547663524c6d3647375247704165754e32317633"
//         "57684c326d69594172416a366d64536a78707a534d7459624e6f793666525a34375450"
//         "4c536737706869386254363b34373b3234363b3236303b3239353b7d4b1100\","
//         "\"txid\":"
//         "\"97a2236cc2c96e413c314bda7775f06c3e2e0001887b47be076b47a4756754ae\","
//         "\"hash\":"
//         "\"97a2236cc2c96e413c314bda7775f06c3e2e0001887b47be076b47a4756754ae\","
//         "\"depends\":[],\"fee\":1216170,\"sigops\":1,\"weight\":1940}],"
//         "\"coinbaseaux\":{},\"coinbasevalue\":173942048478,\"longpollid\":"
//         "\"a4f8aa2190b24ad832bb98779702efe81fcd18be5e1edb6279882218446f030a545"
//         "\",\"target\":"
//         "\"00000000c60c0000000000000000000000000000000000000000000000000000\","
//         "\"mintime\":1662815761,\"mutable\":[\"time\",\"transactions\","
//         "\"prevblock\"],\"noncerange\":\"00000000ffffffff\",\"sigoplimit\":"
//         "20000,\"sizelimit\":16000000,\"curtime\":1662816178,\"bits\":"
//         "\"1d00c60c\",\"height\":1133439,\"devfee\":[{\"address\":"
//         "\"Seqa1ndWyNUU51MSg7hgThSrdfFxfodise\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH160c07290a27153f8adaf01e6f5817405a32f569f61OP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a914c07290a27153f8adaf01e6f5817405a32f569f6188ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"Seqa1ndWyNUU51MSg7hgThSrdfFxfodise\"},"
//         "\"value\":15812913498}],\"infinitynodes\":[{\"address\":"
//         "\"SjhhT32dC9jYKqVo3AyD4eSY4V84kEPEpR\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH160f5ce12a901ae59edccef8e56c842626ac3f32364OP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a914f5ce12a901ae59edccef8e56c842626ac3f3236488ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SjhhT32dC9jYKqVo3AyD4eSY4V84kEPEpR\"},"
//         "\"value\":87600000000},{\"address\":"
//         "\"SYmKNdm5LZ4dwXp4B64Y3SkU6iXBfQASjG\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH1607dd3ecd33fee7faa38ab28bba90a0f5c3f731e1aOP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a9147dd3ecd33fee7faa38ab28bba90a0f5c3f731e1a88ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SYmKNdm5LZ4dwXp4B64Y3SkU6iXBfQASjG\"},"
//         "\"value\":41900000000},{\"address\":"
//         "\"SinBurnAddress123456789SuqaXbx3AMC\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH160ebaf5ec74cb2e2342dfda0229111738ff4dc742dOP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a914ebaf5ec74cb2e2342dfda0229111738ff4dc742d88ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SinBurnAddress123456789SuqaXbx3AMC\"},"
//         "\"value\":28000000000},{\"address\":"
//         "\"SeGYTxB9eodUHEY3qV3LsgfAxUuh8PvShv\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH160ba338b9866638725fc61be9c02b98f4544458f21OP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a914ba338b9866638725fc61be9c02b98f4544458f2188ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SeGYTxB9eodUHEY3qV3LsgfAxUuh8PvShv\"},"
//         "\"value\":1000000},{\"address\":"
//         "\"SVsuQFX8HC4Zsy6hixy4Mwco5XVAPJYjnb\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH1605e2a72d476698c4df4951f4b3ae5a4cd6e7746c1OP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a9145e2a72d476698c4df4951f4b3ae5a4cd6e7746c188ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SVsuQFX8HC4Zsy6hixy4Mwco5XVAPJYjnb\"},"
//         "\"value\":1000000},{\"address\":"
//         "\"SWHzUF1o16gFjNEEUadHPPxKPjQ8BdfJuk\",\"script\":{\"asm\":\"OP_DUPOP_"
//         "HASH16062b8a9b1ed316dea6c68d151260578f6f76b625fOP_EQUALVERIFYOP_"
//         "CHECKSIG\",\"hex\":"
//         "\"76a91462b8a9b1ed316dea6c68d151260578f6f76b625f88ac\",\"type\":"
//         "\"pubkeyhash\",\"address\":\"SWHzUF1o16gFjNEEUadHPPxKPjQ8BdfJuk\"},"
//         "\"value\":1000000},{\"address\":"
//         "\"SinBurnAddress123456789SuqaXbx3AMC\",\"script\":{\"asm\":"
//         "\"ebaf5ec74cb2e2342dfda0229111738ff4dc742dOP_RETURN6275726e666565\","
//         "\"hex\":"
//         "\"14ebaf5ec74cb2e2342dfda0229111738ff4dc742d6a076275726e666565\","
//         "\"type\":\"burn_and_data\",\"address\":"
//         "\"SinBurnAddress123456789SuqaXbx3AMC\"},\"value\":4134980}],\"default_"
//         "witness_commitment\":"
//         "\"6a24aa21a9ed6a28ebe343426567cf585b52c522c8fa31f5c031b56b4a52287dbfb1"
//         "f4f51663\"}";

//     template_json.reserve(template_json.size() + simdjson::SIMDJSON_PADDING);
//     job_manager.GetNewJob(template_json);
//     auto job_ptr = job_manager.GetJob("00000000"sv);

//     ASSERT_NE(job_ptr, nullptr);

//     ASSERT_EQ(
//         job_ptr->GetNotifyMessage(),
//         "{\"id\":null,\"method\":\"mining.notify\",\"params\":[\"00000000\","
//         "\"04000100\","
//         "\"71aeaa7dfb5c6cf5977832aebea1bf630a6d482b464610aa125ba6c358377e02\","
//         "\"cc73ba2e90fc2a7e45e736696d7197dd98b0c207a6702e37cf86ab177491b1b2\","
//         "\"fbc2f4300c01f0b7820d00e3347c8da4ee614674376cbc45359daa54f9b5493e\","
//         "\"2aab5f49\",\"0f0f0f1e\",true,"
//         "\"0500000000000000047f9f161daad669b19d41ba28c1c72512b690e61737e0488ec7"
//         "2fb7daf97bbf6db76aa56dfde4efd6ec92056fc8c0f50f89f35103925a08721b6fa1b4"
//         "5bb274\"]}\n"sv);
// }