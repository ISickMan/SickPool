// #include <simdjson.h>

// #include <vector>

// #include "daemon_manager.hpp"
// #include "daemon_rpc.hpp"
// #include "gtest/gtest.h"
// #include "job_manager.hpp"

// TEST(JobManager, ParseGenesisTemplate)
// {
//     using namespace std::string_view_literals;
//     // DaemonManager daemon_manager(
//     //     {RpcConfig{"127.0.0.1:6004", "YWRtaW4xOnBhc3MxMjM="}});
//     JobManager job_manager(nullptr,
//                            "RSicKPooLFbBeWZEgVrAkCxfAkPRQYwSnC");

//     std::string template_json =
//         "{\"result\":{\"capabilities\":[\"proposal\"],\"version\":65540,"
//         "\"previousblockhash\":"
//         "\"027e3758c3a65b12aa1046462b486d0a63bfa1beae327897f56c5cfb7daaae71\","
//         "\"finalsaplingroothash\":"
//         "\"3e49b5f954aa9d3545bc6c37744661eea48d7c34e3000d82b7f0010c30f4c2fb\","
//         "\"solution\":"
//         "\"0500000000000000047f9f161daad669b19d41ba28c1c72512b690e61737e0488ec7"
//         "2fb7daf97bbf6db76aa56dfde4efd6ec92056fc8c0f50f89f35103925a08721b6fa1b4"
//         "5bb2740000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "0000000000000000000000000000000000000000000000000000000000000000000000"
//         "000000000000000000000000000000\",\"transactions\":[],\"coinbasetxn\":{"
//         "\"data\":"
//         "\"0400008085202f890100000000000000000000000000000000000000000000000000"
//         "00000000000000ffffffff025100ffffffff01000c677f79c31100232103ba4cf5fac8"
//         "e90175f89f59539f56c1d664fc581fca5e00f710eb1ca6b1b67ca0ac1018c762000000"
//         "000000000000000000000000\",\"hash\":"
//         "\"840e07ba6b5c3924a62cd24f7b5627edbc1e69b7141d2ba6b9c278f9508d1368\","
//         "\"depends\":[],\"fee\":0,\"sigops\":1,\"coinbasevalue\":"
//         "5000001200000000,\"required\":true},\"longpollid\":"
//         "\"027e3758c3a65b12aa1046462b486d0a63bfa1beae327897f56c5cfb7daaae712\","
//         "\"target\":"
//         "\"00000f0f0f000000000000000000000000000000000000000000000000000000\","
//         "\"mintime\":1231006506,\"mutable\":[\"time\",\"transactions\","
//         "\"prevblock\"],\"noncerange\":\"00000000ffffffff\",\"sigoplimit\":"
//         "60000,\"sizelimit\":2000000,\"curtime\":1657215387,\"bits\":"
//         "\"1e0f0f0f\",\"height\":1},\"error\":null,\"id\":1}";

//     template_json.reserve(template_json.size() + simdjson::SIMDJSON_PADDING);
//     job_manager.GetNewJob(
//         template_json);
//     auto job_ptr = job_manager.GetJob("00000000"sv);

//     ASSERT_NE(job_ptr, nullptr);

//     ASSERT_EQ(
//         job_ptr->GetNotifyMessage(),
//         "{\"id\":null,\"method\":\"mining.notify\",\"params\":[\"00000000\","
//         "\"04000100\","
//         "\"71aeaa7dfb5c6cf5977832aebea1bf630a6d482b464610aa125ba6c358377e02\","
//         "\"cc73ba2e90fc2a7e45e736696d7197dd98b0c207a6702e37cf86ab177491b1b2\","
//         "\"fbc2f4300c01f0b7820d00e3347c8da4ee614674376cbc45359daa54f9b5493e\","
//         "\"2aab5f49\",\"0f0f0f1e\",true,"
//         "\"0500000000000000047f9f161daad669b19d41ba28c1c72512b690e61737e0488ec7"
//         "2fb7daf97bbf6db76aa56dfde4efd6ec92056fc8c0f50f89f35103925a08721b6fa1b4"
//         "5bb274\"]}\n"sv);
// }